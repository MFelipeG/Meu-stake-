<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu PortfÃ³lio de Stake</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #0f172a; color: white; }
    input, select {
      background-color: #1e293b;
      color: white;
      border: 1px solid #334155;
      border-radius: 0.5rem;
      padding: 0.5rem;
      width: 100%;
    }
    input::placeholder { color: #94a3b8; }
    table { border-collapse: collapse; width: 100%; }
    th, td { padding: 8px; }
    th { background-color: #1e293b; }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold mb-6 text-cyan-400">ðŸ’° Rastreador de Staking</h1>

  <div class="bg-slate-800 p-6 rounded-2xl shadow-lg w-full max-w-lg">
    <form id="stakeForm" class="space-y-4">
      <div>
        <label class="block mb-1">Plataforma:</label>
        <select id="platform">
          <option>Lido</option>
          <option>Aave</option>
          <option>Uniswap</option>
          <option>Binance</option>
          <option>Outra</option>
        </select>
      </div>

      <div>
        <label class="block mb-1">Token em Stake:</label>
        <input type="text" id="stakedToken" placeholder="Ex: ETH, USDT, MATIC">
      </div>

      <div>
        <label class="block mb-1">Token Colateral (LSD):</label>
        <input type="text" id="collateralToken" placeholder="Ex: stETH, aETH, etc.">
      </div>

      <div>
        <label class="block mb-1">Valor Investido (â‚¬):</label>
        <input type="number" id="invested" step="0.01">
      </div>

      <div>
        <label class="block mb-1">% de Ganho:</label>
        <input type="number" id="percentGain" step="0.01" placeholder="Ex: 5.5">
      </div>

      <div>
        <label class="block mb-1">Tipo:</label>
        <select id="type">
          <option value="APR">APR</option>
          <option value="APY">APY</option>
        </select>
      </div>

      <div>
        <label class="block mb-1">Data de InÃ­cio:</label>
        <input type="date" id="startDate">
      </div>

      <div>
        <label class="block mb-1">Tempo MÃ­nimo de Bloqueio (dias):</label>
        <input type="number" id="minLockDays" placeholder="Ex: 30">
      </div>

      <div>
        <label class="block mb-1">Tempo Total atÃ© Desbloqueio (dias):</label>
        <input type="number" id="unlockDays" placeholder="Ex: 90">
      </div>

      <div>
        <label class="block mb-1">Carteira Utilizada:</label>
        <select id="wallet">
          <option>Metamask</option>
          <option>Trust Wallet</option>
          <option>SafePal</option>
          <option>Phantom</option>
          <option>Binance Wallet</option>
          <option>Outra</option>
        </select>
      </div>

      <button type="submit" class="w-full bg-cyan-500 text-black font-bold p-3 rounded hover:bg-cyan-400 transition">Adicionar Stake</button>
    </form>
  </div>

  <div class="mt-10 w-full max-w-5xl">
    <h2 class="text-2xl font-semibold mb-4 text-cyan-300">ðŸ“Š Meus Stakes</h2>
    <table>
      <thead>
        <tr class="bg-slate-700">
          <th>Plataforma</th>
          <th>Token</th>
          <th>Colateral</th>
          <th>Investido (â‚¬)</th>
          <th>%</th>
          <th>Tipo</th>
          <th>Data InÃ­cio</th>
          <th>Min Bloq.</th>
          <th>Desbloq.</th>
          <th>Falta</th>
          <th>Carteira</th>
          <th>Retorno (â‚¬)</th>
        </tr>
      </thead>
      <tbody id="stakeTable"></tbody>
      <tfoot class="bg-slate-700 font-bold">
        <tr>
          <td colspan="3" class="p-2">Total Investido:</td>
          <td id="totalInvested" class="p-2">â‚¬0</td>
          <td colspan="6" class="p-2">Total Estimado (â‚¬):</td>
          <td id="totalReturn" class="p-2">â‚¬0</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <script>
    const form = document.getElementById('stakeForm');
    const tableBody = document.getElementById('stakeTable');
    const totalInvestedEl = document.getElementById('totalInvested');
    const totalReturnEl = document.getElementById('totalReturn');
    let totalInvested = 0;
    let totalReturn = 0;

    form.addEventListener('submit', e => {
      e.preventDefault();

      const platform = form.platform.value;
      const stakedToken = form.stakedToken.value;
      const collateralToken = form.collateralToken.value;
      const invested = parseFloat(form.invested.value);
      const percentGain = parseFloat(form.percentGain.value);
      const type = form.type.value;
      const startDate = form.startDate.value;
      const minLockDays = parseInt(form.minLockDays.value);
      const unlockDays = parseInt(form.unlockDays.value);
      const wallet = form.wallet.value;

      const estimatedReturn = invested + (invested * percentGain / 100);

      // CÃ¡lculo do tempo restante
      const start = new Date(startDate);
      const unlockDate = new Date(start);
      unlockDate.setDate(start.getDate() + unlockDays);

      const today = new Date();
      const diffTime = unlockDate - today;
      const remainingDays = Math.max(0, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${platform}</td>
        <td>${stakedToken}</td>
        <td>${collateralToken}</td>
        <td>â‚¬${invested.toFixed(2)}</td>
        <td>${percentGain}%</td>
        <td>${type}</td>
        <td>${startDate}</td>
        <td>${minLockDays}d</td>
        <td>${unlockDays}d</td>
        <td>${remainingDays}d</td>
        <td>${wallet}</td>
        <td>â‚¬${estimatedReturn.toFixed(2)}</td>
      `;
      tableBody.appendChild(row);

      totalInvested += invested;
      totalReturn += estimatedReturn;
      totalInvestedEl.textContent = "â‚¬" + totalInvested.toFixed(2);
      totalReturnEl.textContent = "â‚¬" + totalReturn.toFixed(2);

      form.reset();
    });
  </script>

</body>
</html>
